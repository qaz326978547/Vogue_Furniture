import{c as n}from"./cartStore-433e9fb7.js";import{_ as h,m as p,f as m,o as i,c,a as t,F as g,h as D,t as s}from"./index-58dd759c.js";import"./alertStore-a3d9239e.js";const{VITE_URL:_,VITE_PATH:u}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"qaz326978547",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},y={data(){return{orderList:{},orderData:{},orderTime:"",products:{},userData:{},ispay:!1}},methods:{...p(n,["getCart"]),getOrder(){const l=this.$route.params.id;console.log(l),this.axios.get(`${_}/api/${u}/order/${l}`).then(e=>{console.log("res",e),this.orderData=e.data.order,this.products=Object.values(this.orderData.products),this.userData=e.data.order.user,this.orderList=e.data;const a=new Date(this.orderData.create_at*1e3);this.orderTime=a.toLocaleDateString(),console.log("orderData",this.orderData),console.log("product",this.products),console.log("userdata",this.userData),console.log("全部",e.data)})},pay(){console.log(this.orderList.order.create_at);const l=this.$moment().valueOf();this.orderList.order.create_at=l;const e=this.$route.params.id;this.axios.post(`${_}/api/${u}/pay/${e}`,this.orderList).then(a=>{console.log(a),swal({title:"付款成功",icon:"success",timer:2e3}),this.getOrder()})}},computed:{...m(n,["cart"])},mounted(){this.getOrder(),this.getCart()}},f={class:"container"},v={class:"row gx-5 justify-content-center justify-content-md-start mb-3"},x={class:"col-md-6 col-12"},b=t("h4",{class:"text-center text-md-start"},"訂單內容",-1),L={class:"mb-3"},T={class:"row g-0 align-items-center"},E={class:"col-4"},O=["src"],w={class:"col-6"},S={class:"p-3"},V={class:"badge bg-primary"},R={class:"card-title my-3"},A={class:"card-text"},B={class:"col-2"},I={class:"col-md-6 bg-light"},U=t("h4",{class:"text-center text-md-start my-3"},"訂單資訊",-1),j={class:"mb-3 order-container"},k=t("p",{class:"order-title"},"訂單狀態:",-1),C=t("p",{class:"order-title"},"訂單金額:",-1),P=t("p",{class:"order-title"},"訂單編號:",-1),q=t("p",{class:"order-title"},"訂單成立時間:",-1),F=t("hr",null,null,-1),H=t("p",{class:"order-title"},"收件人:",-1),N=t("p",{class:"order-title"},"Email:",-1),$=t("p",{class:"order-title"},"收件人電話:",-1),z=t("p",{class:"order-title"},"收件地址:",-1);function M(l,e,a,G,o,d){return i(),c("div",f,[t("div",v,[t("div",x,[b,(i(!0),c(g,null,D(o.products,r=>(i(),c("div",L,[t("div",T,[t("div",E,[t("img",{src:r.product.imageUrl,class:"img-fluid rounded",alt:"...",style:{width:"100%",height:"100%"}},null,8,O)]),t("div",w,[t("div",S,[t("small",null,[t("span",V,s(r.product.category),1)]),t("h6",R,s(r.product.title),1),t("p",A,"數量:"+s(r.qty),1)])]),t("div",B,[t("p",null,"NT$"+s(r.product.price),1)])])]))),256))]),t("div",I,[U,t("div",j,[t("ul",null,[t("li",null,[k,t("p",null,s(o.orderData.is_paid?"已付款":"未付款"),1)]),t("li",null,[C,t("p",null,s(o.orderData.total),1)]),t("li",null,[P,t("p",null,s(o.orderData.id),1)]),t("li",null,[q,t("p",null,s(o.orderTime),1)])]),F,t("ul",null,[t("li",null,[H,t("p",null,s(o.userData.name),1)]),t("li",null,[N,t("p",null,s(o.userData.email),1)]),t("li",null,[$,t("p",null,s(o.userData.tel),1)]),t("li",null,[z,t("p",null,s(o.userData.address),1)])])])]),t("button",{type:"button",class:"btn btn-primary mt-3",onClick:e[0]||(e[0]=(...r)=>d.pay&&d.pay(...r))},s(o.orderData.is_paid?"付款成功":"確認付款"),1)])])}const W=h(y,[["render",M]]);export{W as default};
