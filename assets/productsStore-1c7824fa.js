import{B as d,C as r}from"./index-1b007bab.js";import{a as l}from"./alertStore-833da373.js";const{VITE_URL:i,VITE_PATH:c}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"qaz326978547",BASE_URL:"/Vogue_Furniture/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},g=l(),n=d("products",{state:()=>({products:[],product:{},categorys:[],categoryList:[],currentCategory:"all",isLoading:!1,categoryItem:[],limitProduct:[]}),actions:{getProducts(){this.isLoading=!0,r.get(`${i}/api/${c}/products/all`).then(s=>{this.products=s.data.products,this.categoryList=s.data.products,this.isLoading=!1;let t=[];this.products.map(e=>{t.push(e.category)}),t=[...new Set(t)],this.categorys=t}).catch(s=>{var e;const t=((e=s.data)==null?void 0:e.message)||"資料取得失敗，稍後在試";g.getState(t,!1)})},getProduct(s){this.isLoading=!0,r.get(`${i}/api/${c}/product/${s}`).then(t=>{this.product=t.data.product,this.isLoading=!1,this.getCategoryItem(this.product.category)}).catch(t=>{var a;const e=((a=t.data)==null?void 0:a.message)||"資料取得失敗，稍後在試";g.getState(e,!1)})},getCategory(s){if(this.currentCategory=s,s=="all")this.getProducts();else{let t=[];t=this.products.filter(e=>e.category===s),this.categoryList=t}},getCategoryItem(s){this.currentCategory=s,console.log("分類",this.currentCategory),s=="all"?this.getProducts():r.get(`${i}/api/${c}/products/all`).then(t=>{const e=t.data.products.filter(o=>o.category==s);console.log(e),this.categoryItem=e;let a=[];for(let o=0;o<4&&e[o]!=null;o++)a.push(e[o]);this.limitProduct=a,console.log(this.limitProduct)}).catch(t=>{var a;const e=((a=t.data)==null?void 0:a.message)||"資料取得失敗，稍後在試";g.getState(e,!1)})}}});export{n as p};
